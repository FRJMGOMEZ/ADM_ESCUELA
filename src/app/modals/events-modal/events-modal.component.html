<div class='animated fadeIn' [ngClass]="_modalController.hidden">
    <div class="modal" style='display: block' role="dialog">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button (click)="hideModal()" type="button" class="close" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body pb-4">
                    <form ngNativeValidate #form='ngForm' role='form'>

                        <!--  PAGE 1  -->
                        <div *ngIf="page==='1'" class="d-flex justify-content-center form-group flex-column mb-2">
                            <p class='text-center'>Selecciona la hora de inicio del evento</p>
                            <select *ngIf="decimalsOfPosition >= 0" [(ngModel)]="startDecimals" name=startDecimals class='form-control'>
                                        <option value=0>{{position | timeConversor:'0'}}</option>
                                        <option *ngIf="spaceAvailable >= 0.50 && decimalsOfPosition < 0.75" value=0.25>{{position | timeConversor:'25'}}</option>
                                        <option *ngIf="spaceAvailable >= 0.75 && decimalsOfPosition < 0.50 " value=0.50>{{position | timeConversor:'50'}}</option>
                                        <option *ngIf="spaceAvailable >= 1 && decimalsOfPosition < 0.25" value=0.75>{{position | timeConversor:'75'}}</option>
                                    </select>
                            <div class='d-flex justify-content-around'>
                                <button *ngIf="startDecimals" (click)="switch(page,'next')">NEXT</button>
                            </div>
                        </div>

                        <!--  PAGE 2  -->
                        <div *ngIf="page === '2'" class="d-flex form-group d-flex flex-column">
                            DURACION
                            <select *ngIf="spaceAvailable - (timeRepresentation.decimals/100) >= 1" [(ngModel)]="timeRepresentation.integer" name="timeRepresentation.integer" class='form-control'>
                                    <option  value=0> </option>
                                    <option *ngIf="spaceAvailable - (timeRepresentation.decimals/100) >= 1" value=1>{{spaceAvailable-(spaceAvailable-1)}}</option>
                                    <option *ngIf="spaceAvailable - (timeRepresentation.decimals/100) >= 2"value=2>{{spaceAvailable-(spaceAvailable-2)}}</option>
                                    <option *ngIf="spaceAvailable - (timeRepresentation.decimals/100) >= 3"value=3>{{spaceAvailable-(spaceAvailable-3)}}</option>
                                    <option *ngIf="spaceAvailable - (timeRepresentation.decimals/100) >= 4"value=4>{{spaceAvailable-(spaceAvailable-4)}}</option>
                                    <option *ngIf="spaceAvailable - (timeRepresentation.decimals/100) >= 5"value=5>{{spaceAvailable-(spaceAvailable-5)}}</option>
                                    <option *ngIf="spaceAvailable - (timeRepresentation.decimals/100) >= 6"value=6>{{spaceAvailable-(spaceAvailable-6)}}</option>
                                    <option *ngIf="spaceAvailable - (timeRepresentation.decimals/100) >= 7"value=7>{{spaceAvailable-(spaceAvailable-7)}}</option>
                                    <option *ngIf="spaceAvailable - (timeRepresentation.decimals/100) >= 8"value=8>{{spaceAvailable-(spaceAvailable-8)}}</option>
                                    <option *ngIf="spaceAvailable - (timeRepresentation.decimals/100) >= 9"value=9>{{spaceAvailable-(spaceAvailable-9)}}</option>
                                    <option *ngIf="spaceAvailable - (timeRepresentation.decimals/100) >= 10"value=10>{{spaceAvailable-(spaceAvailable-10)}}</option>
                                    <option *ngIf="spaceAvailable - (timeRepresentation.decimals/100) >= 11"value=11>{{spaceAvailable-(spaceAvailable-11)}}</option>
                                    <option *ngIf="spaceAvailable - (timeRepresentation.decimals/100) >= 12" value=12>{{spaceAvailable-(spaceAvailable-12)}}</option>
                                </select>
                            <select *ngIf="spaceAvailable - timeRepresentation.integer >= 0.25" [(ngModel)]="timeRepresentation.decimals" name="timeRepresentation.decimals" class='form-control'>
                                    <option value=0></option>
                                    <option *ngIf="spaceAvailable-timeRepresentation.integer >=0.25" value=25>15 minutos</option>
                                    <option *ngIf="spaceAvailable-timeRepresentation.integer >= 0.50" value=50>30 minutos</option>
                                    <option *ngIf="spaceAvailable-timeRepresentation.integer >= 0.75" value=75>45 minutos</option>
                                </select>
                            <div class="custom-control custom-checkbox">
                                <input [(ngModel)]="repetition" name='repetition' type="checkbox" class="custom-control-input" id="customCheck1">
                                <label class="custom-control-label" for="customCheck1">Repetir todas las semanas</label>
                            </div>
                            <div class='d-flex justify-content-around'>
                                <button (click)="switch('2','prev')">PREV</button>
                                <button *ngIf="timeRepresentation.decimals > 0 || timeRepresentation.integer > 0" (click)="switch('2','next')">NEXT</button>
                            </div>
                        </div>

                        <!--  PAGE 3  -->
                        <div *ngIf="page === '3'" #div3 class="row d-flex form-group flex-column align-content-center">
                            <input [(ngModel)]='name' name='name' type="text" class="form-control" placeholder="Nombre" required>
                            <textarea [(ngModel)]="description" type="text" name="description" class="form-control"></textarea>
                            <div class='d-flex justify-content-around'>
                                <button (click)="switch('3','prev')">PREV</button>
                                <button *ngIf="name" (click)="switch('3','next')">NEXT</button>
                            </div>
                        </div>

                        <!--  PAGE 4  -->
                        <div *ngIf="page ==='4'" #div4 class="row d-flex justify-content-center">
                            <div class="row">
                                <div class="col-6 d-flex flex-column">
                                    <p>Materias
                                        <p>
                                            <select #valueSubject>
                                           <option value=" "></option>
                                           <option *ngFor="let subject of subjects " [value]="subject._id ">{{subject.nombre}}</option>
                                        </select>

                                            <button class='btn btn-warning' (click)='addSubject(valueSubject.value)'>ADD</button>

                                            <div class='d-flex flex-column' class=''>
                                                <a *ngFor="let subject of selectedSubjects "> {{subject.nombre}}</a>
                                            </div>
                                </div>
                                <div class="col-6 d-flex flex-column">
                                    <p>Profesores
                                        <p>
                                            <select #valueProfessor>
                                            <option value=" "></option>
                                            <option *ngFor="let professor of professors " [value]="professor._id ">{{professor.nombre}}</option>
                                        </select>
                                            <button class='btn btn-warning' (click)='addProfessor(valueProfessor.value)'>ADD</button>
                                            <div class='d-flex flex-column'>
                                                <a *ngFor="let professor of selectedProfessors ">{{professor.nombre}}</a>
                                            </div>
                                </div>
                                <div class="col-12 d-flex justify-content-around">
                                    <button (click)="switch('4','prev')">PREV</button>
                                    <button *ngIf="!eventId && !eventCreated" (click)='postEvent()' class='btn btn-warning'>CREAR EVENTO</button>
                                    <button *ngIf="eventCreated" (click)='putEvent()' class='btn btn-warning'>MODIFICAR EVENTO</button>
                                </div>
                            </div>
                        </div>
                    </form>

                    <!--  PAGE 5  -->
                    <div *ngIf="page === '5'" class="row">
                        <div class="col-12 d-flex flex-column">
                            <h6 class='text-center'>Event Succesfully created</h6>
                            <p>nombre: {{eventCreated.nombre}}</p>
                            <p>descripcion: {{eventCreated.descripcion}}</p>
                            <div>
                                <p>Profesores participantes :</p>
                                <p *ngFor="let profesor of eventCreated.profesores">{{profesor.nombre}}</p>
                            </div>
                            <div>
                                <p> Materias :</p>
                                <p *ngFor="let materia of eventCreated.materias">{{materia.nombre}}</p>
                            </div>
                            <p>Empieza a las: {{eventCreated.posicion | timeConversor2: null }}</p>
                            <p>Termina a las: {{eventCreated.posicion | timeConversor2: eventCreated.duracion }}</p>
                            <p>instalacion : {{eventCreated.instalacion.nombre}}</p>
                            <p>duracion : {{eventCreated.duracion | timeConversor1}}</p>
                            <p>Repetir todas las semanas : {{eventCreated.repeticion}}</p>
                            <button (click)="checkSpaceBack()">MODIFICAR EVENTO</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>